<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Cartas para Paula</title>

  <!-- Fuentes -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link 
    href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;700&family=Caveat&display=swap" 
    rel="stylesheet"
  >
  
  <style>
    :root {
      --color1: #E1D9D3; /* Fondo suave */
      --color2: #E4BEAF;
      --color3: #B5E3AB;
      --color4: #E8BAD2;
      --color5: #62CBB8;
      --color6: #FBFEFE; /* Casi blanco */

      /* Sobre */
      --bg-envelope-color: #f5edd1;
      --envelope-tab: #ecdeb8;
      --envelope-cover: #e6cfa7;
      --shadow-color: #1c1c1c;
      --heart-color: #c2465d;
      --primary: white;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    /* Permitimos scroll vertical si el contenido es alto */
    body {
      font-family: 'Poppins', sans-serif;
      background: var(--color1);
      overflow-x: hidden; /* Ocultamos solo el scroll horizontal */
    }

    /* Fondo carrusel de IMÁGENES */
    .background-carousel {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: -1;
      overflow: hidden;
    }
    .background-carousel img {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      opacity: 0;
      transition: opacity 3s ease-in-out, transform 10s ease-in-out;
    }
    .background-carousel img.active {
      opacity: 1;
      transform: scale(1.1);
    }

    /* Contenedor principal (ocupa al menos la altura de la ventana) */
    .outer-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      min-height: 100vh;
      position: relative;
    }

    /* Carrusel (1 carta por pantalla): overflow hidden SOLO AQUÍ */
    .carousel {
      display: flex;
      justify-content: flex-start;
      width: 90%;
      max-width: 700px;
      margin: 2rem auto;        /* algo de margen vertical */
      
      position: relative;
      transition: transform 0.5s ease;
    }

    /* Cada SLIDE ocupa 100% del ancho del .carousel */
    .slide {
      min-width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      text-align: center;
      background-color: rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      margin: 3%;
    }
    .slide h1 {
      font-family: 'Great Vibes', cursive;
      font-size: 2.5rem;
      margin-bottom: 1.5rem;
    }

    /* Botones Anterior / Siguiente */
    .carousel-controls {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem; /* separarlos un poco del carrusel */
    }
    .carousel-controls button {
      background-color: var(--color5);
      color: #fff;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 5px;
      font-size: 1rem;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s;
    }
    .carousel-controls button:hover {
      background-color: var(--color4);
    }

    /* SOBRE ANIMADO */
    .envelope-wrapper {
      display: inline-block; 
      background: transparent;
      box-shadow: none;
    }
    .envelope {
      position: relative;
      width: 350px;
      height: 250px;
    }
    .envelope::before {
      content: "";
      position: absolute;
      top: 0;
      right: 0;
      z-index: 2;
      border-top: 130px solid var(--envelope-tab);
      border-right: 175px solid transparent;
      border-left: 175px solid transparent;
      transform-origin: top;
      transition: all 0.5s ease-in-out 0.7s;
    }
    .envelope::after {
      content: "";
      position: absolute;
      z-index: 2;
      right: 0;
      width: 0;
      height: 0;
      border-top: 130px solid transparent;
      border-right: 175px solid var(--envelope-cover);
      border-bottom: 120px solid var(--envelope-cover);
      border-left: 175px solid var(--envelope-cover);
    }

    .letter {
      position: absolute;
      right: 20%;
      bottom: 0;
      width: 54%;
      height: 80%;
      background: var(--primary);
      text-align: center;
      transition: all 1s ease-in-out;
      box-shadow: 0 0 5px var(--shadow-color);
      padding: 20px 10px;
    }
    .letter .text {
      font-family: "Caveat", cursive;
      color: #333;
      text-align: justify;
      font-size: 11px;
    }

    .heart {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 15px; 
      height: 15px;
      background: var(--heart-color);
      z-index: 4;
      transform: translate(-50%, -50%) rotate(45deg);
      transition: transform 0.5s ease-in-out 1s;
      box-shadow: 0 1px 6px var(--shadow-color);
      cursor: pointer;
    }
    .heart:before, 
    .heart:after {
      content: "";
      position: absolute;
      width: 15px;
      height: 15px;
      background-color: var(--heart-color);
      border-radius: 50%;
    }
    .heart:before {
      top: -7.5px; 
      right: 0;
    }
    .heart:after {
      right: 7.5px;
    }

    /* Clases para abrir/cerrar sobre */
    .flap > .envelope::before {
      transform: rotateX(180deg);
      z-index: 0;
    }
    .flap > .envelope > .letter {
      bottom: 100px;
      transform: scale(1.5);
      transition-delay: 1s;
    }
    .flap > .heart {
      transform: rotate(90deg);
      transition-delay: 0.4s;
    }

    /* MODAL PARA CONTRASEÑA */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.6);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 999;
    }
    .modal-overlay.active {
      display: flex;
    }
    .modal-content {
      background: #fff;
      padding: 2rem;
      border-radius: 10px;
      text-align: center;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
    }
    .modal-content h3 {
      font-family: 'Poppins', sans-serif;
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }
    .modal-content input[type="password"] {
      width: 80%;
      padding: 0.5rem;
      margin-bottom: 1rem;
      border: 2px solid #ccc;
      border-radius: 5px;
    }
    .modal-content button {
      background-color: var(--color5);
      color: #fff;
      border: none;
      padding: 0.8rem 2rem;
      border-radius: 5px;
      font-size: 1rem;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s;
    }
    .modal-content button:hover {
      background-color: var(--color4);
    }
    .error-message {
      color: red;
      margin: 0.5rem 0;
      font-size: 0.9rem;
    }

    /* MODAL PARA MOSTRAR CARTA REAL */
    .modal-card-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.7);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal-card-overlay.active {
      display: flex;
    }
    .modal-card-content {
      background: #fff;
      padding: 1.5rem;
      max-height: 80vh;
      overflow-y: auto;
      border-radius: 10px;
      text-align: left;
      max-width: 900px;
      width: 90%;
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
    }
    .modal-card-content h2 {
      font-family: "Great Vibes", cursive;
      font-size: 2rem;
      margin-bottom: 1rem;
      text-align: center;
    }
    .modal-card-content p {
      margin-bottom: 1rem;
      font-family: "Caveat", cursive;
      font-size: 1.3rem;
      line-height: 1.6;
      white-space: pre-line;
    }
    .close-card {
      display: inline-block;
      margin-top: 1rem;
      background-color: var(--color5);
      color: #fff;
      border: none;
      padding: 0.5rem 1.5rem;
      border-radius: 5px;
      font-size: 1rem;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s;
    }
    .close-card:hover {
      background-color: var(--color4);
    }

    /* Ajustes para móviles */
    @media (max-width: 600px) {
      .carousel {
        width: 95%;
        margin: 1rem auto;
      }
      .slide {
        padding: 1rem;
      }
      .envelope {
        width: 280px;
        height: 200px;
      }
      .envelope::before {
        border-top: 100px solid var(--envelope-tab);
        border-right: 140px solid transparent;
        border-left: 140px solid transparent;
      }
      .envelope::after {
        border-right: 140px solid var(--envelope-cover);
        border-bottom: 90px solid var(--envelope-cover);
        border-left: 140px solid var(--envelope-cover);
      }
      .letter {
        padding: 10px 5px;
      }
      .slide h1 {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <!-- Fondo del carrusel de imágenes -->
  <div class="background-carousel" id="backgroundCarousel"></div>

  <!-- Contenedor principal -->
  <div class="outer-wrapper">
    <!-- Carrusel de CARTAS -->
    <div class="carousel" id="carousel"></div>

    <!-- Botones de navegación del carrusel -->
    <div class="carousel-controls">
      <button id="prevBtn">Anterior</button>
      <button id="nextBtn">Siguiente</button>
    </div>
  </div>

  <!-- Modal Overlay para pedir contraseña -->
  <div class="modal-overlay" id="passwordModal">
    <div class="modal-content">
      <h3>Protegido</h3>
      <p>Introduce la contraseña para ver la carta:</p>
    <p id="passwordHint" style="font-style: italic; color: #888; margin-bottom: 1rem;"></p>
      <input type="password" id="passwordInput" placeholder="Contraseña">
      <div class="error-message" id="errorMessage"></div>
      <button id="checkPasswordBtn">Entrar</button>
    </div>
  </div>

  <!-- Modal para mostrar la carta real -->
  <div class="modal-card-overlay" id="cardModal">
    <div class="modal-card-content">
      <h2 id="cardTitle"></h2>
      <p id="cardText"></p>
      <button class="close-card" id="closeCardBtn">Cerrar</button>
    </div>
  </div>

  <!-- Script principal -->
  <script>
    // =============================
    // 1) DATOS DE LAS CARTAS
    // =============================
    const lettersData = [
      {
        title: "Dia a Dia",
        text: `Mis cosas: \nHola! Espero que todo vaya genial, que estes recuperándote, que estes sanándote que poco a poco la vida te este yendo a mejor, aunque siempre intento saber algo sobre ti, de como estas, que esta pasando nuevo en tu vida o que nuevos retos o ambiciones tienes, no tengo mucha información, mas allá de lo que me cuentan, y bueno, eso ahora mismo me esta matando… Por eso creo que lo mejor para calmar este sentimiento horrible que tengo por dentro, es escribirte, ya esta, escribirte, como si te tuviese aquí delante, hablar contigo, sin tener una respuesta, pero para mi ya es algo, imaginarte simplemente escuchándome. 
              21-04:
              Hola, he vuelto de Semana Santa, la he pasado en Torrevieja, la verdad que estuve agusto, pero se aleja mucho de estar bien, me rei?, si, salí? También, pero no me vuelvo con la sensación de disfrutar, al reves me vuelvo con una sensación agridulce, con un vacio, como que no me llena, en fin, quizás fue lo que tanto demandaba y he descubierto que eso no me llena.

              28-04:
              Bueno bueno bueno, la que me están liando con el diente, llevo ya un par de veces para que me arreglen el diente pocho ese que tenia, y cada vez que voy al dentista me tienen que quitar el que tengo, y es *MUY* desagradable, pues de momento he venido ya dos veces y ninguna han acertado con el color, me han puesto un diente de mentira mas falso que un billete de 2€, en fin, a ver si para el 7 mayo atinan con el diente.
              
              5-05:
              Viaje a Cordoba, despedida de Soltero de Javi, todo apunta a viajazo, espero a que me recoja Javi Alonso con Luis y Alberto y de camino a Atocha, me doy cuenta que no llevo la cartera, y no se si me van a dejar pasar (otra patinada de las mias) finalmente me salvo otra vez el culo y no miran DNI. En el trayecto intento no pensar, pero hay un sentimiento que finalmente hable con Javi Alonso y Javi Martinez, todo el grupo, todo el viaje, mire a donde mire…. Me recuerda a ti. Intento estar bien, desconectar, pero no sales de mi cabeza (como si antes ya no estuviese), quizás hable mas de ti de lo que me hubiese gustado, quizás pregunté mas por ti de lo que hubiese querido, quizás pensé en ti mas de lo que necesitaba. Vaya tres días, distintos, raros, me lo pasé bien, pero sigue sin ser mi lugar.
              
              07-05: 
              Me cago en todo, otra vez el diente, me decían que esta vez si que era la correcta, he ido, me han quitado el diente (prácticamente te lo rompen) y…… SORPRESA! Sigue sin ser el color exacto, me quiero pegar un tiro en la sien, me han dicho que para la siguiente lo clavan (no), pero que para asegurarme mejor, que me vaya yo directamente al laboratorio y que me vean exactamente el color allí in situ. Otra vuelta mas… Ya te contare el 15 de Mayo que es fiesta en Madrid.
              PD: En estas ocasiones también te echo de menos
              
              13-05: 
              Hola!! Espero que estes genial! He visto que te has apuntado a Crossfit con Roci, no sabes lo contento que me he puesto, solamente de verte, de saber de ti, de saber que estas progresando, que estas mejorando, aunque solamente sea en las fotos. Se que tienes un objetivo claro a nivel físico, y veo que lo estas cumpliendo, cada vez te veo mejor en las fotos.
              
              13-05 (noche):
              He visto hoy en Tik-tok que has compartido un post que bueno… espero que no vaya por mi, es sobre Joe (You) no se a lo que te puedes referir, en fin… me he comenzado a ver la serie, los dos primero episodios muy guays ;)
              
              15-05:
              Finalmente me han puesto el diente finalmente, estoy contento, creo que se acabaron tantas vueltas, por otro lado he retomado la Bachata, y me he apuntado a Salsa tambien, con la esperanza de poder enseñarte algun dia, de poder volver a tomar tu mano, mirarte a los ojos y perderme una vez mas, te echo mucho de menos Paula, intento cambiar mis dias para ver si consigo evadirme de ti, de tu presencia en mi cabeza, pero estas siempre ahi, en una esquina, sin hacer mucho ruido pero presente siempre. Ojala pudieses irte a dormir conmigo esta noche, como lo echo de menos.
              
              17-05:
              Me ha tocado unos pases para ir a Desalia, WOW! Nunca me toca nada y sin quererlo, pues toma, a Desalia que me voy, ojala poder compartirlo contigo, ojala que te pudieses venir conmigo, pero bueno ahora mismo mis objetivos y aspiraciones estan enfocados en otro lado, hoy tambien que he jugado al Padel alli en Alcorcón, un poco a la desesperada me he pasado por tu calle (se que suena un poco creepy), con la esperanza de verte, aunque sea a traves de tu ventana.... esto mejor lo dejamos entre tu y yo jajaja.... de esperanzas se vive!
              Tambien me he propuesto ( y de momento lo estoy siguiendo) un plan de comidas algo mas regular, estoy cansado de estar una y otra vez sobreviviendo de lo que tengo en casa del mismo dia o hacer las comprar para 1 o 2 dias. Pasito a pasito voy reordenando mi vida, estoy contento con estos pequeños cambios. Te seguire contando mas adelante!! :)  
              
              21-05:
              Salimos para Desalia, parece que es broma que estoy de camino en autobus a Tarragona cuando la semana pasada no tenia ni idea de que iba a hacer esta semana. Todo parece que pinta mucho mas bestial de lo que me imagino, veremos que dias pasó... Hoy me toca todo el dia en el bus practicamente (8h) jajaj.
              
              22-05:
              Dios santo, esto no es real, vaya experiencia mas alucinante, es cierto que estoy aqui por una puñetera coincidencia del destino... y todo por saber algo de informatica y ganar a un juego de matar patos.... ya ayer fue espectacular, el Hotel esta dentro de el propio parque de atracciones PortAventura, esta todo el hotel customizado para el evento, numero de habitaciones, habitaciones, ascensores, halls, pasillos, zonas comunes, restaurantes etc... La de pasta que hay aqui metida... Tenemos varias fiesta tematicas, ayer fue la que se llama "Flow2000", y estuve recordando como
              te quedaria una sudadera de tu padre antigua (de esas que te encantan y sueles usar a diario) y unos vaqueros anchos, ademas de complementos jajajja, unos pendiente grandotes, unas zapatillas de epoca etc... La gente aqui es muy maja, tu aqui hubieses triunfado con en don de gentes que tienes... y con un par de copas mas... si en Bruselas hiciste bailar el Himno del PP a unos guiris, aqui haces bailar el himno de España a unos independentistas... Mañana te contare que tal hoy, que hoy es el Bling Pink (Fiesta de rosa).

              23-05:
              Bueno, que ayer no te lo conté, aqui hay MOGOLLON de influencers, y entre ellos esta Kiko Rivera, Sandra Barneda, Illojuan, Ibelky etc... pero el que mas me hizo ilusión fue Peldanyos.... BUMMM! Un recuerdo directo a ti!! Estuve hablando con el, mucho la verdad, le dije que tenia la salsa de Llave Acida (no le conté que me parecia una puta mierda...) me estuvo enseñando en su movil que iba a sacar un nuevo set de Salsas... una de manzana y otra como de mango, las tenia alli encima. Ese momento que estuve con el me recordo mucho a ti, sigues estando en mi cabeza incluso cuando desconecto de todo.
              Bling Pink!!! Fiesta de rosa!!!, actua Mar Lucas segun nos han dicho, la experiencia esta siendo brutal, para volver a repetirla el año que viene, voy a poner todo de mi parte para que sea contigo, para volver juntos, pero antes de la fiesta.... toca ir a PortAventura, creo que mi cara ya les ha dicho a los de por aqui que no se preocupen por sus mochilas por que se las voy a cuidar muy bien... ya sabes que las atracciones y yo no somos muy amigos... 

              24-05:
              Ayer la noche fue espectacular pero algo mas flojita que la primera noche... Lo habras visto por instagram que subi un par de cositas (no soy mucho de usarlo), pero el par de cositas que subí iban con truco, si escuchas las canciones, son dos que me recuerdan a ti! Una de Hombres G y otra de Maná! Espero que tu por tu parte te lo estes pasando tambien bien, estes disfrutando, sonriendo, sanando y espero que en algun momento... acordandote de mi, por que yo si que lo estoy haciendo y mucho :)
              Noche Ibicenca hoy! Actua Lerica y Abraham Mateo, voy ultra guapo! Es probable que use esta ropa (o almenos esta camisa) para nuestro dia 5! Quiero que me veas espectacular! Pero antes de la fiesta ibicenca, tenemos fiesta en la piscina, esto esta siendo una pasada... Aunque me estoy empezando a encontrar algo mal, tengo mucha tos... de momento lo aguanto.
              
              25-05:
              Vaya noche la de ayer! Fue con diferencia la mejor de todas, y eso que el liston estaba muy alto, estoy agotadisimo, muerto!! Fijate que estoy hasta con ganas de irme a casa ya, hoy nos queda la ultima fiesta tematica, Parkineo, todo techno, a saber que tienen preparado...

              26-05:
              Ya camino a casa! Vuelvo algo malo, tengo tos y algo de dolor de garganta, necesito recuperarme que mañana vuelta al trabajo, y no me veo con nada de ganas de empezar... hoy dia de autobus total jajaja. Te echo de menos.

              28-05:
              Pues me acaban de dar un notición!!!! La verdad que no te he llegado a llamar pues por que quiero respetarte, respetar lo que hablamos, pero te lo cuento por aqui por que estoy super ilusionado.... ME HAN ASCENDIDO! Me lo acaban de decir hace 15 min y lo primero que he hecho ha sido venir aqui a contartelo, por lo que si, eres la primera en enterarte!! ajajajaj Si todo va bien, me encantaria invitarte como siempre, a celebrarlo juntos, espero que tu tambien este teniendo buenas noticias, que te sientas agusto, feliz, valorada en tu trabajo...
              Por otro lado... te tengo que contar que me he apuntado a Salsa y a Bachata aqui al ladito de casa, estuve viendo que tambien me puede ayudar a distraerme, reflexionar, reconstruirme el hacer este tipo de actividades solo. Me da clase Mica y Fran!! Me encantaria poder retomarlo contigo y que te pudieses unir a estas clases conmigo, como echo de menos bailar contigo! que feliz era y que poco lo valoraba, espero que no sea tarde...
              Bueno, me voy a contarle esta noticia a mis padres y a mi abuela ajaajaja. Nos vemos en la siguiente!!

              29-05:
              Pues nada, hoy en urgencias, he empeorado bastante de la tos, la garganta y el dolor de cabeza, ahora tengo fiebre, estoy con 37.8 y subiendo, he pasado la noche solo y he tenido que llamar a mis padres por la mañana para decirles que habia empeorado, creo que me vuelvo a casa de mis padres por unos dias hasta que mejore....

              02-05:
              Uff ha pasado tiempo ehh... he estado bastante jodido, parece que estoy remontando ya, tuve 38.9 de fiebre, he estado casi 5 dias sin comer, he tenido que pedir la baja laboral, solo tomando liquidos (he perdido 3KG... me rio de la dieta del cucurucho) y me han salido mogollon de llagas por la boca, me escribio Javi antes de ayer para ir a la fiesta de la Pedida que habian montado Nieves y el, por la mañana que me encontraba medio bien y pensaba que ya estaba recuperado le dije que si!! que me hacia mucha ilusion verles, despues empeore muchisimo por la tarde que no pude moverme de la cama... por lo que me fue imposible ir... y voy y me entero al dia siguiente que has ido tu... y eso Paula... me pico como si me hubiesen metido un dedo por el culo, con las ganas que tengo de verte, me hubiese encantado coincidir contigo....
              Nose si por tu parte te hubiese gustado o no, pero a mi me hubiese encantado verte, saber de ti, aunque ya solo me queda esperar hasta el dia 5 de Julio, que la fecha se me esta acercando cada vez mas... y tengo una mezcla entre miedo y ganas. Te vi genial en las fotos, estabas guapisima, brillabas y como no, siempre con tu sonrisa! 
              Tambien he visto que tu primo Oscar se ha casado, cuanto me alegro, no sabes lo feliz que me hizo veros a todos, tenia un sentimiento agridulce por dentro, te mentiria si no te digo que he visto esos video 10.000 veces, una y otra y otra vez. Tengo un hueco vacio por dentro, se que al final estamos aqui ambos por mi culpa, y tengo que ser responsable por eso... Tambien mentiria si no te digo que te vi en los video con ese vestido morado, ese recogido, esos accesorios dorados, WOW!! Estabas espectacular Paula, se me caia la baba desde la cama mientras lo veia... hoy estoy algo mejor, creo que ya me daran el alta y podre volver a trabajar. Te echo de menos!

              09-05:
              Buenos dias!! Espero que tengas un buen dia! Ayer vi que fuistes con Roci a un festi, Despistaos, Pignoise etc... que locura!! Espero que lo disfrutases muchiiisimo! Otra puta historia que me habre visto como 1.000.000 de veces... Estuve la semana pasada en la Psicologa, es cierto que este mes he vuelto a ir, de cara a preparar el volver a verte, como manejar esos sentimientos y sensaciones. Salí algo triston la verdad, me dijo que si por algun casual volviesemos a estar juntos, me comenta que seria dificil, pero no imposible, y es a eso donde yo me agarro, confio mucho en mi, confio mucho en nosotros, me comentó que debemos estar seguros ambos, de pedir ayuda externa y volver a empezar realmente de 0. 
              Aunque yo ya se que tu no eres la misma, ni yo soy el mismo, darnos la oportunidad de conocernos de 0, y descubrir si esas personas en las que nos hemos convertido realmente pueden construir de nuevo algo solido, algo sano, algo bonito, algo sincero, y no nos quedemos con lo que ya tenemos. Yo prometo poner todo de mi parte, he recapacitado muchisimo en este tiempo, he valorado realmente lo que tenia antes, lo que nos causaba problemas desde mi parte y lo que realmente quiero, en este tiempo he visto ciertas cosas que me cuesta asumirte, y entre ellas, la que mas me duele asumirte y decirte que tenias razón era sobre Juanlu... el es mi amigo, pero como tu me decias, no es tan amigo como me pensaba.
              En fin... soy humano, he tenido que esperar a darme cuenta de las cosas por mi mismo, y como tambien soy humano, tambien soy capaz de asumirte que yo quizas no estaba tan en lo correcto, y que tu quizas no estabas tan equivocada. 
              Con respecto al los entrenamientos de por las tardes, pues me gustaria mantenerlos, pero estoy viendo que ahora tal y como te dije, Marcos esta viajando mucho, y estoy perdiendo un poco la continuidad, de ahi que este valorando quizas en apuntarme a un gimnasio por mi cuenta, incluso ir juntos si se diese asi... en fin, ya veré lo que hago jajajaj
              Por cierto!! el dia 22 de junio me han liado para bailar en la exhibición de Salsa/Bachata que hacen anualmente las escuelas, este año me tocara bailar solo, no me refiero sin pareja, me refiero sin ti, y aunque lo haga solo, tu estaras en mi cabeza en cada uno de los pasos que dé, y desearé que el proximo podamos retomarlo juntos... En fin, estoy cagado, tengo solo 15 dias para aprenderme la coreo de Bachata y de Salsa, la de Bachata ya la tengo medio controlada, pero la de Salsa..... ni de coñisima, veremos la juja que monto ese dia JAJAJAJ.

              13-05:
              Buenisimos diass!!! Espero que hayas tenido una buena semana!! Nose si en estos dias te habra llegado un paquete a tu casa, a tu nombre... cagada mia, una mas AJAJAJ, pedi un par de cosas por Aliexpress y se me olvido que estaba tu casa y tu nombre como envio por defecto, y cuando me quise dar cuenta... ya era muy tarde, lo siento mucho, lo he hablado con mi madre y con Irene, no sabia si escribirte o no, finalmente por no molestarte y respetar el contacto 0 que me pediste, he decidido darlo por "perdido" y si por algun casual has caido en que la pude haber liado... pues ya me lo daras JAJAJJJ.
              Tambien he pedido otro que va a tu casa pero este si que me ha dado tiempo a cambiarlo y recogerlo en un punto de recogida... Bueno un tantito mas para la porteria de cagadas que tengo! :D. No me enrollo mas, por mi parte la semana muy tranquilita, mucha salsa y mucha bachata que es en lo que se basan mis dias ultimamente de cara al festival JAJAJJ. Espero que te vaya todo genial! Te echo de menos!

              17-05:
              Buenisimoss dias!! Ya se acerca el dia 5 de Junio, he supuesto que sobre estas fechas o esta semana estaras por Calpe, espero que bien, espero que disfrutando, yo me acuerdo mucho de ti, he estado en la psicologa de nuevo, hablando de ti de nuevo, me dice que esta contenta conmigo, que tengo bastante coherencia en lo que digo, que tengo bien puesto el 'foco' como ella dice y que parece que he salido de esas crisis personal que tuve, es cierto que no sabia ni donde me metia...jajaja, tengo como deberes que hacer , distintas preguntas que tengo que dar respuesta, como las siguientes:
              - Por que piensas en Paula y no en otras personas cuando estas solo o en los ratos libres?
              - Que emociones te mueve Paula? (Usar Rueda de las Emociones)
              - Que me atrae de lo conocido?
              Bueno esto son algunas de ellas que ya tengo respondidas por cierto JAJAJJ. Quedé el fin de semana con mis padres, mi hermano y con mi abuela (A.K.A la deformadora de sombreros, el terror de Dracula, Megamind, la mujer Calabaza, Mike Wazowski, Doraemon o la 'frente infinita') y fue mi hermano quien me hizo LA pregunta:
              '¿Bueno, ya se acerca el dia, estas nervioso? Sabes que vas a hacer?' y PUFFF! El resto de conversación de la mesa es historia, ya mi abuela preguntando por ti, mis padres igual, y yo pues con la incertidumbre que tengo todos los dias... Sin saber realmente que responder, tengo mis cosas claras, pero realmente no se si tu estas en ese punto, si tu has cosneguido sanar, si me has podido perdonar y estas dispuesta a comenzar algo nuevo, algo sano, por que era lo que nos faltaba, por que AMOR DEL BUENO, nos sobraba...
              En fin, pasan los dias y lo veo cada vez mas cerca y lo sigo viendo lejos...
              Por cierto, este domingo tengo la actuación de Salsa/Bachata en la calle Alcala... para tu info sigo cagado, me se mas o menos las coreos, pero lo que esta claro es que he ido a menos en el nivel de la pareja comparada con la del año pasado, me han puesto en Salsa una mujer que puede pesar perfectamente en torno a los 150KG... y la tengo que coger practicamente en brazos... en fin, problemas para el Pablo del futuro! Te echo de menosss!

              19-05:
              Eyyy! Buenas nochess! Ayer estuve jugando al padel con Javi Martinez y Javi Alonso, y otra vez la misma pregunta... 
              - Ya no te queda nada Pablo... estas nervioso? -
              Es cierto que veo a Javi Alonso mas 'convencido' de que tu y yo vayamos a volver que a Javi Martinez, no quiero darle muchas vueltas, no se si es que sabe algo que Nieves le ha podido contar y no quiere contarmelo o ni idea.... yo que se, no quiero agobiarme, ya llegará, aunque realmente me gusta hablar de este tema con ellos, veo que me apoyan, y me siento seguro, se rien por que no he cogido nada aun para la boda de Javi y Nieves por si vienes conmigo... aunque deberia ir mirandolo aunque sea doble y luego duerma solo...
              Bueno, me voy a dormir, creo que le voy a tener que dar la vuelta al colchon, que desde que te fuiste duermo todas las noches en tu lado... supongo que te noto mas cerca asi :S JAJAAJAJ (que moñas!). Descansa! Espero que te vaya bien!
              
              `,
            
        password: "La Promesa", 
        hint: "Nuestra canción:",
        music: "assets/music/next_summer.mp3",
        isSpecial: true  // Campo especial para sobresalir visualmente
      },
      {
        title: "21/01 Primer Contacto",
        text: `Sé que no hace tanto tiempo que no te escribo, pero hoy siento la necesidad de hablarte, de poner en palabras todo lo que ha pasado desde que tomamos caminos separados. No busco revivir el pasado ni reprochar lo que ya no tiene sentido; solo quiero compartir contigo cómo he vivido estos días, estos meses, en los que tu ausencia ha sido una constante.
        Desde que nos alejamos, he intentado seguir adelante. He conocido personas, salido a nuevos planes, y buscado llenar el vacío que tengo. Algunas de esas personas han sido graciosas, otras interesantes, pero ninguna ha sido tú. No es que las compare, no busco encontrarte en otras miradas, pero es inevitable reconocer que hay algo en ti que simplemente no se repite.
        He tratado de entender qué es eso que me falta. Tal vez sea la manera en que sabías lo que pensaba sin necesidad de hablar, o cómo nuestras conversaciones fluían sin esfuerzo, sabiendo que eres la persona que mas me conoce del mundo, por encima de yo mismo. 
        Recuerdo cada momento, no como un peso que arrastro, sino como un recordatorio de lo que alguna vez fue especial. No me malinterpretes, no estoy estancado en el pasado; sé que la vida sigue y que ambos tenemos derecho a encontrar nuestra felicidad. Pero quiero ser sincero: nadie ha logrado ocupar el lugar que dejaste en mi vida.
        He aprendido mucho desde que no estás. Aprendí a valorarme más, a entender mis emociones, y a ser paciente conmigo mismo. He descubierto que la confianza no se pide ni se exige, se gana con acciones sinceras y consistentes, en ella se encuentra la base de una relación. También entendí que algunas conexiones son únicas, y aunque intentemos replicarlas, siempre serán diferentes. No quiero decir que te idealicé o te idealizo, porque sé que ambos cometimos errores. Solo quiero reconocer que lo que compartimos fue muy importante.
        Lo voy a conseguir, es una promesa. No tengo opción, no puedo rendirme ni fallarme otra vez. Este camino que he elegido no es fácil, pero es necesario. Sé que rendirse no es una posibilidad.
        Esta carta no busca nada más que expresar lo que siento y que lo siento. No es un intento de volver ni de cambiar lo que ya es. Es simplemente una manera de decirte que, aunque el tiempo ha pasado, tu recuerdo sigue siendo parte de quien soy hoy.
        Y una vez más después del tiempo quiero decirte: Gracias por todo lo que vivimos. Gracias por los momentos buenos y también por los difíciles, porque de cada uno aprendí algo valioso. No sé dónde estás ni qué haces ahora, pero espero sinceramente que estes encontrando la felicidad que tanto mereces.
        Pero si alguna vez te preguntas si aún hay alguien dispuesto a darlo todo por ti, quiero que sepas que estoy aquí, luchando, sin otra opción que dar lo mejor de mí, porque tú siempre lo merecerás.
        Att: Pablo.`,
        password: "Cacaolat",
        hint: "Bebida de chocolate que segun tu... hacias mejor 1000 veces desde casa que la marca comercial. ",
        music: "assets/music/holaQueTal.mp3",
        isSpecial: false
      },
      {
        title: "23/01 Te elijo, una y mil veces.",
        text: `Sé que las cosas no han sido fáciles. Lo siento en ti, en como hablas, en tus silencios, y también en los momentos en los que intentamos arreglar lo que parece romperse. Pero quiero que sepas algo: no me he rendido. Estoy aquí, a pesar de todo, porque creo en nosotros, en lo que somos.

        Duele, lo sé. A veces duele más de lo que esperábamos. Hay días en los que siento que te pierdo poco a poco, y otros en los que me pregunto si no estoy haciendo lo suficiente. Más allá de los errores, de las discusiones y de las diferencias, hay algo que nunca ha cambiado: el querer seguir construyendo contigo, Paula.
        No soy perfecto, lo sé. Tal vez no siempre sé cómo expresarme o cómo hacerte sentir lo que siento. Pero cada día me despierto con la intención de ser mejor para ti, para nosotros. Sé que he fallado, pero también sé que mi corazón nunca ha dejado de querer lo mejor para nosotros.
        Hay cosas que duelen, y que quizás no he sabido enfrentar. Pero también hay algo que siempre me da esperanza: la manera en que, a pesar de todo, seguimos aquí. Eso significa algo, amor. Significa que todavía hay una llama que vale la pena cuidar, aunque a veces parezca que está a punto de apagarse.

        Quiero que sepas que no estoy aquí solo por costumbre o por miedo a soltar. Estoy aquí porque te elijo, cada día, incluso en los momentos más difíciles. Estoy aquí porque creo que podemos sanar juntos, porque creo que aún hay mucho amor que podemos regalarnos si nos damos la oportunidad.

        No quiero que esto sea una lucha en la que nos perdamos el uno al otro. Quiero que sea un proceso en el que crezcamos, en el que aprendamos a escuchar, a entender, a perdonar y, sobre todo, a recordar por qué nos elegimos desde el principio.

        Te amo, y eso no cambiará. Porque aunque este sea el momento más difícil, sé que el amor verdadero no solo se mide en los días felices, sino en cómo enfrentamos juntos las dificultades
        Att: Pablo.`,
        password: "flash",
        hint: "Tipo de postre/helado que te encataba comprar y nunca te comias. PD: Los sigo teniendo aqui...",
        music: "assets/music/demons.mp3",
        isSpecial: false
      },
      {
        title: "26/01 Confianza.",
        text: `Dicen que la confianza es como un cristal, frágil y preciosa. Sé que la rompí, y sé también que no basta con pedir perdón. Por eso, hoy no vengo con promesas vacías, sino con la verdad y la intención de demostrarte que quiero hacer las cosas bien.
        Te fallé, y el dolor que vi en tus ojos es algo que no voy a olvidar. Desde entonces, no dejo de pensar en todo lo que hicimos para crecer juntos, en lo que construimos. Perder eso sería perder una parte de mí.
        Sé que arreglar lo nuestro no será fácil, pero estoy dispuesto a hacerlo. Quiero que sepas que cada día trabajaré para ganarme tu confianza de nuevo, no con palabras, sino con hechos. Cada acción, cada decisión será un paso hacia el amor del bueno, amor seguro que mereces.
        
        No prometo ser perfecto, pero sí ser sincero. No prometo que será rápido, pero sí que cada día pondré mi corazón en sanar lo que jodí. Porque tú vales todo el esfuerzo, y porque creo profundamente que este amor puede renacer más fuerte que nunca.

        Si aún queda una chispa en tu corazón, si aún hay un espacio para mí, quiero llenarlo con el respeto, la paciencia y el amor que siempre debiste recibir.
        Estoy aquí, con el corazón en mis manos, esperando la oportunidad de demostrarte cuánto significas para mí. Por que realmente, sé que eres el Amor de Mi Vida.
        Att: Pablo.`,
        password: "Manolo",
        hint: "Como se llamaba mi abuelo Paterno?", 
        music: "assets/music/thousandYears.mp3",
        isSpecial: false
      },
      {
        title: "30/01 Nervios.",
        text: `Hoy tengo la ansiedad de verte, sé que te veo el Domingo, aunque tu no lo sepas por que aun no te he preguntado, pero cada minuto en contra, me quema.
        Estos dias la vida me ha demostrado lo que me haces sentir, el sentido que das a mi vida, y el amor que te tengo, puro sano y real. Otro dia mas, incluso sin estar, me has enseñado lo que significa amar. 
        Aunque no se si estarás o si seguirás, siempre te recordaré por lo que me has enseñado.
        Quiero que crezcas, que te desarrolles, que te encuentres, que te conviertas en la mejor versión de ti misma, y quiero ser parte de ese crecimiento, de esa evolución. Quiero ser tu apoyo, tu compañero, tu amigo, tu novio, tu marido.
        Me he vuelto a dar cuenta de que estoy enamorado de ti, pero no de ti físicamente, estoy enamorado de tu esencia, de tus demonios, de tus miedos, estoy enamorado de tus ojos, tus carcajadas, tus caricias, estoy enamorado de todo lo que me haces sentir sin saberlo
        Me has enseñado a quererme, a reírme de mi, me has enseñado que el amor no duele, sana, que el amor no es ansiedad, es calma y que tú siempre serás HOGAR.
        Att: Pablo.`,
        password: "Nariz",
        hint: "Parte de mi cuerpo que cuando la tocas provoca una somnolencia inmediata?", 
        music: "assets/music/perfect.mp3",
        isSpecial: false
      }
      // Añade más cartas si lo deseas
    ];

    function showPasswordHint(index) {
        const hint = lettersData[index].hint;
        document.getElementById('passwordHint').innerText = "Pista: " + hint;
      }

    // =============================
    // 2) CARRUSEL DE FONDO (IMÁGENES)
    // =============================
    const backgroundCarousel = document.getElementById('backgroundCarousel');
    const imagePaths = [
      'assets/images/slide2.webp',
      'assets/images/slide6.webp',
      'assets/images/slide5.webp',
      'assets/images/slide10.webp',
      'assets/images/slide47.webp',
      'assets/images/slide24.webp',
      'assets/images/slide22.webp',
      'assets/images/slide34.webp',
      'assets/images/slide44.webp'
    ];

    imagePaths.forEach((path, i) => {
      const img = document.createElement('img');
      img.src = path;
      if (i === 0) img.classList.add('active');
      backgroundCarousel.appendChild(img);
    });

    const slidesBg = Array.from(backgroundCarousel.querySelectorAll('img'));
    let currentBgIndex = 0;
    function changeSlideBg() {
      slidesBg[currentBgIndex].classList.remove('active');
      currentBgIndex = (currentBgIndex + 1) % slidesBg.length;
      slidesBg[currentBgIndex].classList.add('active');
    }
    setInterval(changeSlideBg, 3500);

    // =============================
    // 3) CREAR CADA SLIDE (CARTA) DINÁMICAMENTE
    // =============================
    const carousel = document.getElementById('carousel');

    lettersData.forEach((letter, index) => {
      console.log("[Create Slide]", index, letter.title);
      const slideDiv = document.createElement('div');
      slideDiv.classList.add('slide');
      slideDiv.setAttribute('data-index', index);

      const titleEl = document.createElement('h1');
      titleEl.textContent = `Carta ${index + 1}`;
      slideDiv.appendChild(titleEl);

      // Sobre
      const envelopeWrapper = document.createElement('div');
      envelopeWrapper.classList.add('envelope-wrapper');

      const envelope = document.createElement('div');
      envelope.classList.add('envelope');

      if (letter.isSpecial) {
        envelope.style.setProperty('--envelope-tab', '#ff4b5c');
        envelope.style.setProperty('--envelope-cover', '#ff4b5c');
      }

      const letterDiv = document.createElement('div');
      letterDiv.classList.add('letter');
      const textDiv = document.createElement('div');
      textDiv.classList.add('text');

      letterDiv.appendChild(textDiv);
      envelope.appendChild(letterDiv);
      envelopeWrapper.appendChild(envelope);

      // Corazón
      const heartDiv = document.createElement('div');
      heartDiv.classList.add('heart');
      heartDiv.addEventListener('click', () => openPasswordModal(index));
      envelopeWrapper.appendChild(heartDiv);

      slideDiv.appendChild(envelopeWrapper);
      carousel.appendChild(slideDiv);
      console.log("[Slide appended] data-index:", index);
    });

    // =============================
    // 4) LÓGICA DEL CARRUSEL (UNA CARTA POR VEZ)
    // =============================
    let currentSlide = 0;
    const totalSlides = lettersData.length;

    function showSlide(index) {
      console.log("[showSlide] Quiero mostrar el slide:", index);

      if (index < 0) {
        index = totalSlides - 1;
        console.log("[showSlide] Ajustado a último slide:", index);
      }
      if (index >= totalSlides) {
        index = 0;
        console.log("[showSlide] Ajustado a primer slide:", index);
      }

      currentSlide = index;
      console.log("[showSlide] currentSlide final:", currentSlide);

      const offset = -100 * index;
      console.log("[showSlide] translateX:", offset + "%");

      carousel.style.transform = `translateX(${offset}%)`;
    }

    document.getElementById('prevBtn').addEventListener('click', () => {
      console.log("[prevBtn] clic -> currentSlide - 1 =", currentSlide - 1);
      showSlide(currentSlide - 1);
    });
    document.getElementById('nextBtn').addEventListener('click', () => {
      console.log("[nextBtn] clic -> currentSlide + 1 =", currentSlide + 1);
      showSlide(currentSlide + 1);
    });
    showSlide(0);

    // =============================
    // 5) MODAL DE CONTRASEÑA
    // =============================
    const passwordModal = document.getElementById('passwordModal');
    const passwordInput = document.getElementById('passwordInput');
    const errorMessage = document.getElementById('errorMessage');
    const checkPasswordBtn = document.getElementById('checkPasswordBtn');

    let currentLetterIndex = null;
    let unlockedLetters = JSON.parse(localStorage.getItem('unlockedLetters')) || {};

    function openPasswordModal(index) {
      currentLetterIndex = index;

      // Si la carta ya está desbloqueada, ir directo
      if (unlockedLetters[index]) {
        openCardModal(index);
        return;
      }
      // Si no está desbloqueada, mostramos el modal para introducir contraseña
      passwordInput.value = '';
      errorMessage.textContent = '';
      passwordModal.classList.add('active');
      showPasswordHint(index);
    }

    checkPasswordBtn.addEventListener('click', checkPassword);
    passwordInput.addEventListener('keyup', (e) => {
      if (e.key === 'Enter') checkPassword();
    });

    function checkPassword() {
      const enteredPass = passwordInput.value.trim().toLowerCase();
      const realPass = lettersData[currentLetterIndex].password.toLowerCase();
      if (enteredPass === realPass) {
        telegramSendMessage(`La carta "${lettersData[currentLetterIndex].title}" ha sido desbloqueada. Contraseña: ${realPass}`);
        unlockedLetters[currentLetterIndex] = true;
        localStorage.setItem('unlockedLetters', JSON.stringify(unlockedLetters));
        passwordModal.classList.remove('active');
        openCardModal(currentLetterIndex);
      } else {
        telegramSendMessage(`Intento fallido de desbloqueo de la carta "${lettersData[currentLetterIndex].title}".\nContraseña: ${enteredPass}`);
        errorMessage.textContent = 'Contraseña incorrecta. Intenta de nuevo.';
        passwordInput.value = '';
      }
    }

    // =============================
    // 6) MODAL DE LA CARTA Y REPRODUCCIÓN DE MÚSICA
    // =============================
    const cardModal = document.getElementById('cardModal');
    const closeCardBtn = document.getElementById('closeCardBtn');
    const cardTitle = document.getElementById('cardTitle');
    const cardText = document.getElementById('cardText');

    // Creamos un <audio> por cada carta
    const audios = lettersData.map(letter => {
      const audio = new Audio(letter.music);
      audio.volume = 0.15;
      return audio;
    });

    let savedTimes = JSON.parse(localStorage.getItem('savedTimes')) || {};

    function openCardModal(index) {
      // Mostrar animación de sobre abierto
      const slide = document.querySelector(`.slide[data-index='${index}']`);
      slide.classList.add('flap');

      const envWrapper = slide.querySelector('.envelope-wrapper');
      envWrapper.classList.add('flap');

      // Título y texto en el modal
      cardTitle.textContent = lettersData[index].title;
      cardText.textContent  = lettersData[index].text;
      cardModal.classList.add('active');

      // Reproducir música desde tiempo guardado
      const audio = audios[index];
      audio.currentTime = savedTimes[index] || 0;
      audio.play().catch(err => {
        console.warn("El navegador bloqueó la reproducción automática:", err);
      });
    }

    closeCardBtn.addEventListener('click', () => {
      cardModal.classList.remove('active');

      // Detener la música y guardar el tiempo
      const index = currentLetterIndex;
      const audio = audios[index];
      audio.pause();
      savedTimes[index] = audio.currentTime;
      localStorage.setItem('savedTimes', JSON.stringify(savedTimes));

      // Cerrar el sobre con animación (quitar .flap)
      const slide = document.querySelector(`.slide[data-index='${index}']`);
      if (slide) {
        slide.classList.remove('flap');
        const envWrapper = slide.querySelector('.envelope-wrapper');
        if (envWrapper) envWrapper.classList.remove('flap');
      }
    });

    // =============================
    // 7) ENVIAR EVENTOS A TELEGRAM (OPCIONAL)
    // =============================
    const TELEGRAM_BOT_TOKEN = "5979062101:AAG3ifapspWVoTkQ4T1o0EzkqWxyvVyqF4g";
    const TELEGRAM_CHAT_ID   = "72034934";

    function telegramSendMessage(text) {
      const baseUrl = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
      const encodedText = encodeURIComponent(text);
      const finalUrl = `${baseUrl}?chat_id=${TELEGRAM_CHAT_ID}&text=${encodedText}`;

      fetch(finalUrl)
        .then(res => {
          if (!res.ok) {
            console.error("Error al enviar mensaje a Telegram:", res.statusText);
          } else {
            console.log("Mensaje enviado a Telegram:", text);
          }
        })
        .catch(err => console.error("Error en fetch Telegram:", err));
    }

    

    // Ejemplo de recolección de IP y geolocalización
    async function getUserIPAndLocation() {
      try {
        const ipResponse = await fetch('https://api.ipify.org?format=json');
        const ipData = await ipResponse.json();
        const userIP = ipData.ip;

        // Si quieres descartar alguna IP de pruebas:
        if (userIP === '139.47.73.163') return null;
        
        const geoResponse = await fetch(`https://ipapi.co/${userIP}/json/`);
        const geoData = await geoResponse.json();
        return { ip: userIP, city: geoData.city, country: geoData.country_name };
      } catch (error) {
        console.error("Error al obtener IP/Location:", error);
        return null;
      }
    }

    function guessDeviceDetails() {
      const ua = navigator.userAgent || "Unknown UA";
      if (ua.includes("iPhone"))  return "iPhone";
      if (ua.includes("iPad"))    return "iPad";
      if (ua.includes("Android")) return "Android device";
      if (ua.includes("Mac OS"))  return "Mac OS device";
      if (ua.includes("Windows")) return "Windows PC";
      return "Dispositivo desconocido";
    }

    (async () => {
      const data = await getUserIPAndLocation();
      if (data) {
        const { ip, city, country } = data;
        const device = guessDeviceDetails();
        telegramSendMessage(`Visita Cartas:\nIP: ${ip}\nCiudad: ${city}\nPaís: ${country}\nDevice: ${device}`);
      }
    })();
  </script>
</body>
</html>